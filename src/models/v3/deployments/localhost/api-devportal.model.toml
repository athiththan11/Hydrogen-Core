# ###################################################################
# 
# Generated by Hydrogen
# 
# @description: This is a sample deployment.toml configuration which 
# generated by Hydrogen. Please make the required changes 
# configurations by adding new or editing the existing to work and 
# achieve your requirements
# 
# @tip: You can use the following keywords to search
#   * "CHANGEME" keyword to list all the required changes
#   * "HYDROGEN" keyword for notes and tips
# 
# ###################################################################

# -------------- general server configurations --------------

[server]
# hostname = "devportal.wso2.com"
node_ip = "127.0.0.1"
server_role = "api-devportal"
offset = 3

[super_admin]
username = "admin"
password = "admin"
create_admin_account = true

[user_store]
type = "database_unique_id"

# --------------
# -------------- other configurations --------------

# [keystore.tls]
# file_name =  "wso2carbon.jks"
# type =  "JKS"
# password =  "wso2carbon"
# alias =  "wso2carbon"
# key_password =  "wso2carbon"

# [truststore]
# file_name = "client-truststore.jks"
# type = "JKS"
# password = "wso2carbon"

[[apim.gateway.environment]]
name= "Production and Sandbox"
type= "hybrid"
display_in_api_console= true
show_as_token_endpoint_url = true
description= "This is a hybrid gateway that handles both production and sandbox token traffic."
username= "${admin.username}"
password= "${admin.password}"

# CHANGEME: point to the gateway host
service_url= "https://localhost:9444/services/"
http_endpoint = "http://localhost:8281/"
https_endpoint = "https://localhost:8244/"
ws_endpoint= "ws://localhost:9100"
wss_endpoint = "wss://localhost:8100"

[apim.cache.recent_apis]
enable = false

[apim.cache.scopes]
enable = true

[apim.cache.tags]
expiry_time = 120000

[[event_handler]]
name="userPostSelfRegistration"
subscriptions=["POST_ADD_USER"]

# --------------
# -------------- database configurations --------------

# HYDROGEN: default H2 configurations
# [database.apim_db]
# type = "h2"
# url = "jdbc:h2:./repository/database/WSO2AM_DB;AUTO_SERVER=TRUE;DB_CLOSE_ON_EXIT=FALSE"
# username = "wso2carbon"
# password = "wso2carbon"

# HYDROGEN: sample URL formats
# h2: jdbc:h2:./repository/database/WSO2AM_DB;AUTO_SERVER=TRUE;DB_CLOSE_ON_EXIT=FALSE
# mysql: jdbc:mysql://localhost:3306/apimgt_db?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true
# mssql: jdbc:sqlserver://localhost:1433;databaseName=apimgt_db;SendStringParametersAsUnicode=false
# postgres: jdbc:postgresql://localhost:5432/apimgt_db
# oracle: jdbc:oracle:thin:@localhost:1521/xe

[database.apim_db]
type = "mysql"
url = "jdbc:mysql://localhost:3306/apimgt_db?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true"
username = "wso2carbon"
password = "wso2carbon"

[database.shared_db]
type = "mysql"
url = "jdbc:mysql://localhost:3306/shared_db?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true"
username = "wso2carbon"
password = "wso2carbon"

# --------------
# -------------- key manager & oauth configurations --------------

[apim.key_manager]
username= "$ref{super_admin.username}"
password= "$ref{super_admin.password}"
# CHANGEME: point to the key manager host
service_url = "https://localhost:9447/services/"

[apim.oauth_config]
# CHANGEME: point to the gateway host
revoke_endpoint = "https://localhost:8244/revoke"
enable_token_encryption = false
enable_token_hashing = false

# --------------
# -------------- devportal configurations --------------

# TIP: uncomment, and add required configurations

# [apim.devportal]
# display_multiple_versions = false
# display_deprecated_apis = false

# --------------
# -------------- analytics configurations --------------

# TIP: uncomment, enable and configure analytics

# [apim.analytics]
# store_api_url = "https://analytics.wso2.com:7444"
# username= "$ref{super_admin.username}"
# password= "$ref{super_admin.password}"

# [[apim.analytics.analytics_node]]
# analytics_url="tcp://analytic1.local:7612"
# analytics_auth_url="ssl://analytic1.local:7712"

# [[apim.analytics.analytics_node]]
# analytics_url="tcp://analytic2.local:7612"
# analytics_auth_url="ssl://analytic2.local:7712"

# --------------
