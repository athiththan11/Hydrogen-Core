# ###################################################################
# 
# Generated by Hydrogen
# 
# @description: This is a sample deployment.toml configuration which 
# generated by Hydrogen. Please make the required changes 
# configurations by adding new or editing the existing to work and 
# achieve your requirements
# 
# @tip: You can use the following keywords to search
#   * "CHANGEME" keyword to list all the required changes
#   * "HYDROGEN" keyword for notes and tips
# 
# ###################################################################

# -------------- general server configurations --------------

[server]
# hostname = "publisher.wso2.com"
node_ip = "127.0.0.1"
server_role = "api-publisher"
# offset = 0

[super_admin]
username = "admin"
password = "admin"
create_admin_account = true

[user_store]
type = "database_unique_id"

# --------------
# -------------- other configurations --------------

# [keystore.tls]
# file_name =  "wso2carbon.jks"
# type =  "JKS"
# password =  "wso2carbon"
# alias =  "wso2carbon"
# key_password =  "wso2carbon"

# [truststore]
# file_name = "client-truststore.jks"
# type = "JKS"
# password = "wso2carbon"

[[apim.gateway.environment]]
name= "Production and Sandbox"
type= "hybrid"
display_in_api_console= true
description= "This is a hybrid gateway that handles both production and sandbox token traffic."
username= "${admin.username}"
password= "${admin.password}"

# CHANGEME: point to gateway host
service_url= "https://localhost:9443/services/"
http_endpoint = "http://localhost:8280/"
https_endpoint = "https://localhost:8243/"
ws_endpoint = "ws://localhost:9099"
wss_endpoint = "wss://localhost:8099"

[apim.devportal]
# CHANGEME: point to devportal host
url = "https://localhost:9443/devportal"

[apim.cache.scopes]
enable = true

[apim.cache.publisher_roles] #check the usage and move to dev role
enable = true

# --------------
# -------------- database configurations --------------

# HYDROGEN: default H2 configurations
# [database.apim_db]
# type = "h2"
# url = "jdbc:h2:./repository/database/WSO2AM_DB;AUTO_SERVER=TRUE;DB_CLOSE_ON_EXIT=FALSE"
# username = "wso2carbon"
# password = "wso2carbon"

# HYDROGEN: sample URL formats
# h2: jdbc:h2:./repository/database/WSO2AM_DB;AUTO_SERVER=TRUE;DB_CLOSE_ON_EXIT=FALSE
# mysql: jdbc:mysql://localhost:3306/apimgt_db?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true
# mssql: jdbc:sqlserver://localhost:1433;databaseName=apimgt_db;SendStringParametersAsUnicode=false
# postgres: jdbc:postgresql://localhost:5432/apimgt_db
# oracle: jdbc:oracle:thin:@localhost:1521/xe

[database.apim_db]
type = "mysql"
url = "jdbc:mysql://localhost:3306/apimgt_db?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true"
username = "wso2carbon"
password = "wso2carbon"

[database.shared_db]
type = "mysql"
url = "jdbc:mysql://localhost:3306/shared_db?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true"
username = "wso2carbon"
password = "wso2carbon"

# --------------
# -------------- traffic manager configurations --------------

[apim.throttling]
username= "$ref{super_admin.username}"
password= "$ref{super_admin.password}"
# CHANGEME: point to traffic manager host
service_url = "https://localhost:9443/services/"

[[apim.throttling.url_group]]
# CHANGEME: point to traffic manager host
traffic_manager_urls=["tcp://localhost:9611"]
traffic_manager_auth_urls=["ssl://localhost:9711"]

# HYDROGEN: adding another set of url_group
# [[apim.throttling.url_group]]
# traffic_manager_urls=["tcp://tm2.local:9611"]
# traffic_manager_auth_urls=["ssl://tm2.local:9711"]

# --------------
# -------------- analytics configurations --------------

# TIP: uncomment, enable and configure analytics

# [apim.analytics]
# store_api_url = "https://analytics.wso2.com:7444"
# username= "$ref{super_admin.username}"
# password= "$ref{super_admin.password}"

# [[apim.analytics.analytics_node]]
# analytics_url="tcp://analytic1.local:7612"
# analytics_auth_url="ssl://analytic1.local:7712"

# [[apim.analytics.analytics_node]]
# analytics_url="tcp://analytic2.local:7612"
# analytics_auth_url="ssl://analytic2.local:7712"

# --------------
